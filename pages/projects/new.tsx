import { Container, Heading } from "@chakra-ui/react";
import axios from "axios";
import Head from "next/head";
import { useRouter } from "next/router";
import { ProjectFormData } from "../../models";
import ProjectForm from "../../components/ProjectForm";

export default function NewProject(_props: any) {
  const router = useRouter();
  const onSubmit = async (data: ProjectFormData) => {
    const response = await axios.post("/api/projects", data);
    const { projectId } = response.data;
    router.push(`/projects/${projectId}`);
  };

  return (
    <div>
      <Head>
        <title>Sendy ✈️ | New project</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Container maxW="960px" pt={12}>
        <Heading size="xl" mb={8}>
          New project
        </Heading>
        <ProjectForm onSubmit={onSubmit} />
      </Container>
    </div>
  );
}
